<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png"><link rel="icon" href="/img/fluid.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="Areis"><meta name="keywords" content="北辰代码海游记"><meta name="description" content="MySQL 基础知识"><meta property="og:type" content="article"><meta property="og:title" content="MySQL初级"><meta property="og:url" content="https://polarisink.github.io/2022/08/13/yuque/MySQL%E5%88%9D%E7%BA%A7/index.html"><meta property="og:site_name" content="北辰代码海游记"><meta property="og:description" content="MySQL 基础知识"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://images.unsplash.com/photo-1664957578877-4d667584b30a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHx0b3BpYy1mZWVkfDR8dG93SlpGc2twR2d8fGVufDB8fHx8&auto=format&fit=crop&w=500&q=60"><meta property="article:published_time" content="2022-08-13T13:39:30.000Z"><meta property="article:modified_time" content="2023-02-28T03:41:52.436Z"><meta property="article:author" content="Areis"><meta property="article:tag" content="MySQL"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://images.unsplash.com/photo-1664957578877-4d667584b30a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHx0b3BpYy1mZWVkfDR8dG93SlpGc2twR2d8fGVufDB8fHx8&auto=format&fit=crop&w=500&q=60"><title>MySQL初级 - 北辰代码海游记</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var dntVal,CONFIG={hostname:"polarisink.github.io",root:"/",version:"1.9.3",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,follow_dnt:!0,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml"};CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 6.3.0"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>北辰的笔墨</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> 归档</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> 分类</a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> 标签</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> 关于</a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/default.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="MySQL初级"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2022-08-13 21:39" pubdate>2022年8月13日 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 15k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 127 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">MySQL初级</h1><div class="markdown-body"><p>MySQL 基础知识</p><span id="more"></span><h1 id="一、数据库相关概念"><a href="#一、数据库相关概念" class="headerlink" title="一、数据库相关概念"></a>一、数据库相关概念</h1><h2 id="1、数据库的好处"><a href="#1、数据库的好处" class="headerlink" title="1、数据库的好处"></a>1、数据库的好处</h2><ul><li>1.持久化数据到本地</li><li>2.可以实现结构化查询，方便管理</li></ul><h2 id="2、数据库相关概念"><a href="#2、数据库相关概念" class="headerlink" title="2、数据库相关概念"></a>2、数据库相关概念</h2><ul><li>1、DB：数据库，保存一组有组织的数据的容器</li><li>2、DBMS：数据库管理系统，又称为数据库软件（产品），用于管理 DB 中的数据</li><li>3、SQL:结构化查询语言，用于和 DBMS 通信的语言</li></ul><h2 id="3、数据库存储数据的特点"><a href="#3、数据库存储数据的特点" class="headerlink" title="3、数据库存储数据的特点"></a>3、数据库存储数据的特点</h2><ul><li>1、将数据放到表中，表再放到库中</li><li>2、一个数据库中可以有多个表，每个表都有一个的名字，用来标识自己。表名具有唯一性。</li><li>3、表具有一些特性，这些特性定义了数据在表中如何存储，类似 java 中 “类”的设计。</li><li>4、表由列组成，我们也称为字段。所有表都是由一个或多个列组成的，每一列类似 java 中的”属性”</li><li>5、表中的数据是按行存储的，每一行类似于 java 中的“对象”。</li></ul><h1 id="二、初始化-MYSQL"><a href="#二、初始化-MYSQL" class="headerlink" title="二、初始化 MYSQL"></a>二、初始化 MYSQL</h1><h2 id="1、MySQL-产品的介绍和安装"><a href="#1、MySQL-产品的介绍和安装" class="headerlink" title="1、MySQL 产品的介绍和安装"></a>1、MySQL 产品的介绍和安装</h2><h2 id="2、MySQL-服务的启动和停止"><a href="#2、MySQL-服务的启动和停止" class="headerlink" title="2、MySQL 服务的启动和停止"></a>2、MySQL 服务的启动和停止</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql">方式一：计算机——右击管理——服务<br>方式二：通过管理员身份运行<br>net <span class="hljs-keyword">start</span> 服务名（启动服务）<br>net stop 服务名（停止服务）<br></code></pre></td></tr></table></figure><h2 id="3、MySQL-服务的登录和退出"><a href="#3、MySQL-服务的登录和退出" class="headerlink" title="3、MySQL 服务的登录和退出"></a>3、MySQL 服务的登录和退出</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql">方式一：通过mysql自带的客户端<br>只限于root用户<br><br>方式二：通过windows自带的客户端<br>登录：<br>mysql 【<span class="hljs-operator">-</span>h主机名 <span class="hljs-operator">-</span>P端口号 】<span class="hljs-operator">-</span>u用户名 <span class="hljs-operator">-</span>p密码<br><br>退出：<br>exit或ctrl<span class="hljs-operator">+</span>C<br></code></pre></td></tr></table></figure><h2 id="4、MySQL-的常见命令"><a href="#4、MySQL-的常见命令" class="headerlink" title="4、MySQL 的常见命令"></a>4、MySQL 的常见命令</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-number">1.</span>查看当前所有的数据库<br><span class="hljs-keyword">show</span> databases;<br><span class="hljs-number">2.</span>打开指定的库<br>use 库名<br><span class="hljs-number">3.</span>查看当前库的所有表<br><span class="hljs-keyword">show</span> tables;<br><span class="hljs-number">4.</span>查看其它库的所有表<br><span class="hljs-keyword">show</span> tables <span class="hljs-keyword">from</span> 库名;<br><span class="hljs-number">5.</span>创建表<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> 表名(<br><br>	列名 列类型,<br>	列名 列类型，<br>	。。。<br>);<br><span class="hljs-number">6.</span>查看表结构<br><span class="hljs-keyword">desc</span> 表名;<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-number">7.</span>查看服务器的版本<br>方式一：登录到mysql服务端<br><span class="hljs-keyword">select</span> version();<br>方式二：没有登录到mysql服务端<br>mysql <span class="hljs-comment">--version</span><br>或<br>mysql <span class="hljs-comment">--V</span><br></code></pre></td></tr></table></figure><h2 id="5、MySQL-的语法规范"><a href="#5、MySQL-的语法规范" class="headerlink" title="5、MySQL 的语法规范"></a>5、MySQL 的语法规范</h2><p>1.不区分大小写,但建议关键字大写，表名、列名小写 2.每条命令最好用分号结尾 3.每条命令根据需要，可以进行缩进 或换行 4.注释<br>单行注释：#注释文字<br>单行注释：– 注释文字<br>多行注释：&#x2F;_ 注释文字  _&#x2F;</p><h3 id="SQL-的语言分类"><a href="#SQL-的语言分类" class="headerlink" title="SQL 的语言分类"></a>SQL 的语言分类</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">DQL（Data Query <span class="hljs-keyword">Language</span>）：数据查询语言<br>		<span class="hljs-keyword">select</span><br>	DML(Data Manipulate <span class="hljs-keyword">Language</span>):数据操作语言<br>		<span class="hljs-keyword">insert</span> 、<span class="hljs-keyword">update</span>、<span class="hljs-keyword">delete</span><br>	DDL（Data <span class="hljs-keyword">Define</span> Languge）：数据定义语言<br>		<span class="hljs-keyword">create</span>、<span class="hljs-keyword">drop</span>、<span class="hljs-keyword">alter</span><br>	TCL（Transaction Control <span class="hljs-keyword">Language</span>）：事务控制语言<br>		<span class="hljs-keyword">commit</span>、<span class="hljs-keyword">rollback</span><br></code></pre></td></tr></table></figure><h3 id="SQL-的常见命令"><a href="#SQL-的常见命令" class="headerlink" title="SQL 的常见命令"></a>SQL 的常见命令</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> databases； 查看所有的数据库<br>use 库名； 打开指定 的库<br><span class="hljs-keyword">show</span> tables ; 显示库中的所有表<br><span class="hljs-keyword">show</span> tables <span class="hljs-keyword">from</span> 库名;显示指定库中的所有表<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> 表名(<br>	字段名 字段类型,<br>	字段名 字段类型<br>); 创建表<br><br><span class="hljs-keyword">desc</span> 表名; 查看指定表的结构<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> 表名;显示表中的所有数据<br></code></pre></td></tr></table></figure><h1 id="五、DQL-语言的学习"><a href="#五、DQL-语言的学习" class="headerlink" title="五、DQL 语言的学习"></a>五、DQL 语言的学习</h1><h2 id="1、基础查询"><a href="#1、基础查询" class="headerlink" title="1、基础查询"></a>1、基础查询</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">语法：<br><span class="hljs-keyword">SELECT</span> 要查询的东西<br>【<span class="hljs-keyword">FROM</span> 表名】;<br><br>类似于Java中 :System.out.println(要打印的东西);<br>特点：<br>通过<span class="hljs-keyword">select</span>查询完的结果 ，是一个虚拟的表格，不是真实存在<br>要查询的东西 可以是常量值、可以是表达式、可以是字段、可以是函数<br></code></pre></td></tr></table></figure><h2 id="2、条件查询"><a href="#2、条件查询" class="headerlink" title="2、条件查询"></a>2、条件查询</h2><blockquote><p>条件查询：根据条件过滤原始表的数据，查询到想要的数据</p></blockquote><p>语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span><br>    要查询的字段<span class="hljs-operator">|</span>表达式<span class="hljs-operator">|</span>常量值<span class="hljs-operator">|</span>函数<br><span class="hljs-keyword">from</span><br>    表<br><span class="hljs-keyword">where</span><br>    条件 ;<br></code></pre></td></tr></table></figure><h3 id="1、条件表达式"><a href="#1、条件表达式" class="headerlink" title="1、条件表达式"></a>1、条件表达式</h3><p>示例：salary&gt;10000<br>条件运算符：</p><blockquote><p>&lt; &gt;&#x3D; &lt;&#x3D; &#x3D; !&#x3D; &lt;&gt;</p></blockquote><h3 id="2、逻辑表达式"><a href="#2、逻辑表达式" class="headerlink" title="2、逻辑表达式"></a>2、逻辑表达式</h3><p>示例：salary&gt;10000 &amp;&amp; salary&lt;20000</p><p>逻辑运算符：</p><p>and（&amp;&amp;）:两个条件如果同时成立，结果为 true，否则为 false<br>or(||)：两个条件只要有一个成立，结果为 true，否则为 false<br>not(!)：如果条件成立，则 not 后为 false，否则为 true</p><h3 id="3、模糊查询"><a href="#3、模糊查询" class="headerlink" title="3、模糊查询"></a>3、模糊查询</h3><p>示例：last_name like ‘a%’</p><h2 id="3、排序查询"><a href="#3、排序查询" class="headerlink" title="3、排序查询"></a>3、排序查询</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql">语法：<br><span class="hljs-keyword">select</span><br>	要查询的东西<br><span class="hljs-keyword">from</span><br>	表<br><span class="hljs-keyword">where</span><br>	条件<br><br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> 排序的字段<span class="hljs-operator">|</span>表达式<span class="hljs-operator">|</span>函数<span class="hljs-operator">|</span>别名 【<span class="hljs-keyword">asc</span><span class="hljs-operator">|</span><span class="hljs-keyword">desc</span>】<br></code></pre></td></tr></table></figure><h2 id="4、常见函数"><a href="#4、常见函数" class="headerlink" title="4、常见函数"></a>4、常见函数</h2><h3 id="1、单行函数"><a href="#1、单行函数" class="headerlink" title="1、单行函数"></a>1、单行函数</h3><h4 id="1、字符函数"><a href="#1、字符函数" class="headerlink" title="1、字符函数"></a>1、字符函数</h4><ul><li>concat 拼接</li><li>substr 截取子串</li><li>upper 转换成大写</li><li>lower 转换成小写</li><li>trim 去前后指定的空格和字符</li><li>ltrim 去左边空格</li><li>rtrim 去右边空格</li><li>replace 替换</li><li>lpad 左填充</li><li>rpad 右填充</li><li>instr 返回子串第一次出现的索引</li><li>length 获取字节个数</li></ul><h4 id="2、数学函数"><a href="#2、数学函数" class="headerlink" title="2、数学函数"></a>2、数学函数</h4><ul><li>round 四舍五入</li><li>rand 随机数</li><li>floor 向下取整</li><li>ceil 向上取整</li><li>mod 取余</li><li>truncate 截断</li></ul><h4 id="3、日期函数"><a href="#3、日期函数" class="headerlink" title="3、日期函数"></a>3、日期函数</h4><ul><li>now 当前系统日期+时间</li><li>curdate 当前系统日期</li><li>curtime 当前系统时间</li><li>str_to_date 将字符转换成日期</li><li>date_format 将日期转换成字符</li></ul><h4 id="4、流程控制函数"><a href="#4、流程控制函数" class="headerlink" title="4、流程控制函数"></a>4、流程控制函数</h4><ul><li>if 处理双分支:<ul><li>if(表达式 1，表达式 2，表达式 3):即三目运算符</li></ul></li><li>case 语句:处理多分支</li></ul><blockquote><p>case 变量或表达式<br>when 常量 1 then 值 1<br>when 常量 2 then 值 2<br>when 常量 3 then 值 4<br>…</p></blockquote><h4 id="5、其他函数"><a href="#5、其他函数" class="headerlink" title="5、其他函数"></a>5、其他函数</h4><ul><li>version 版本</li><li>database 当前库</li><li>user 当前连接用户</li><li>password(‘字符’):返回该字符的加密形式</li><li>md5(‘字符):md5 加密</li></ul><h3 id="2、分组函数"><a href="#2、分组函数" class="headerlink" title="2、分组函数"></a>2、分组函数</h3><ul><li>sum 求和</li><li>max 最大值</li><li>min 最小值</li><li>avg 平均值</li><li>count 计数</li></ul><blockquote><p>特点：</p><p>1、以上五个分组函数都忽略 null 值，除了 count(*)</p><p>2、sum 和 avg 一般用于处理数值型<br>max、min、count 可以处理任何数据类型</p><p>3、都可以搭配 distinct 使用，用于统计去重后的结果</p><p>4、count 的参数可以支持：必须非空<br>字段、*、常量值，一般放 1、</p><p>效率上：<br>MyISAM:count(<em>)最高<br>InnoDB:count(</em>) &amp; count(1) &gt; count(字段)<br>6、和分组函数一同查询的字段，要求是 group by 后出现的字段</p></blockquote><h2 id="5、分组查询"><a href="#5、分组查询" class="headerlink" title="5、分组查询"></a>5、分组查询</h2><ul><li>where       筛选条件</li><li>group by   分组的字段</li><li>having     分组后的筛选</li><li>order by   排序列表</li></ul><blockquote><p>特点：</p><p>1、可以按单个字段分组</p><p>2、和分组函数一同查询的字段最好是分组后的字段</p><p>3、分组筛选<br>针对的表 位置 关键字<br>分组前筛选： 原始表    group by 的前面 where<br>分组后筛选： 分组后的结果集 group by 的后面 having</p><p>4、可以按多个字段分组，字段之间用逗号隔开</p><p>5、可以支持排序</p><p>6、having 后可以支持别名</p></blockquote><h2 id="6、多表连接查询"><a href="#6、多表连接查询" class="headerlink" title="6、多表连接查询"></a>6、多表连接查询</h2><blockquote><p>笛卡尔乘积：如果连接条件省略或无效则会出现,导致多个表所有行完全连接</p><p>解决办法：添加上有效连接条件</p></blockquote><ul><li>按年代分类</li></ul><h3 id="1、sql92"><a href="#1、sql92" class="headerlink" title="1、sql92"></a>1、sql92</h3><h4 id="等值连接"><a href="#等值连接" class="headerlink" title="等值连接"></a>等值连接</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 查询列表<br><span class="hljs-keyword">from</span> table1，table2<br><span class="hljs-keyword">where</span> table1.key1 <span class="hljs-operator">=</span> table2.key2<br>&#123;<br><span class="hljs-keyword">and</span> 筛选条件<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> 分组字段<br><span class="hljs-keyword">having</span> 分组后的筛选<br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> 排序字段<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>特点：</p><p>1、一般为表起别名,简化 sql</p><p>2、n 表连接至少需要 n-1 个有效连接条件</p><p>3、多表顺序可以调换</p><p>4、等值连接的结果是多表的交集部分</p></blockquote><h4 id="非等值连接"><a href="#非等值连接" class="headerlink" title="非等值连接"></a>非等值连接</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 查询列表<br><span class="hljs-keyword">from</span> table1，table2<br><span class="hljs-keyword">where</span> 非等值的连接条件<br>&#123;<br><span class="hljs-keyword">and</span> 筛选条件<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> 分组字段<br><span class="hljs-keyword">having</span> 分组后的筛选<br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> 排序字段<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 查询列表<br><span class="hljs-keyword">from</span> <span class="hljs-keyword">table</span> t1，<span class="hljs-keyword">table</span> t2<br><span class="hljs-keyword">where</span> table1.key1 <span class="hljs-operator">=</span> table2.key2<br>&#123;<br><span class="hljs-keyword">and</span> 筛选条件<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> 分组字段<br><span class="hljs-keyword">having</span> 分组后的筛选<br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> 排序字段<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>t1 和 t2 都是一样的表，只是为了方便</p></blockquote><h4 id="部分外连接-oracle、sqlserver"><a href="#部分外连接-oracle、sqlserver" class="headerlink" title="部分外连接(oracle、sqlserver)"></a>部分外连接(oracle、sqlserver)</h4><h3 id="2、sql99-推荐使用"><a href="#2、sql99-推荐使用" class="headerlink" title="2、sql99(推荐使用)"></a>2、sql99(推荐使用)</h3><blockquote><p>sql92 和 sql99 对比</p><p>给你：sql99 功能更多</p><p>可读性：sql99 实现连接条件和筛选条件的分离，可读性更好</p></blockquote><h4 id="1、内连接"><a href="#1、内连接" class="headerlink" title="1、内连接"></a>1、内连接</h4><ul><li>等值连接</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 查询列表<br><span class="hljs-keyword">from</span> table1 alias1<br><span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> table2 alias2<br><span class="hljs-keyword">on</span> 连接条件<br></code></pre></td></tr></table></figure><blockquote><p>特点</p><p>1、添加排序，分组，筛选</p><p>2、inner 可以省略</p><p>3、筛选条件放在 where 后，连接条件放在 on 后面，提高分离性，便于阅读</p><p>4、inner join 连接和 sql92 语法中的等值连接效果是一样的</p></blockquote><ul><li>非等值连接</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> e.salary, j.grade_level<br><span class="hljs-keyword">from</span> employees e<br><span class="hljs-keyword">join</span> job_grades j<br><span class="hljs-keyword">on</span> e.salary <span class="hljs-keyword">between</span> j.lowest_sal <span class="hljs-keyword">and</span> j.highest_sal<br></code></pre></td></tr></table></figure><ul><li>自连接</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql">eg:查询员工的名字，上级的名字<br><span class="hljs-keyword">select</span> e.last_name,m.last_name<br><span class="hljs-keyword">from</span> employees e<br><span class="hljs-keyword">join</span> employees m<br><span class="hljs-keyword">on</span> e.manager_id <span class="hljs-operator">=</span> m.employee_id<br></code></pre></td></tr></table></figure><h4 id="2、外连接"><a href="#2、外连接" class="headerlink" title="2、外连接"></a>2、外连接</h4><blockquote><p>结果&#x3D; 主表中所有的行,其中从表和他匹配的将现实匹配行，如果从表没有匹配的则显示 null<br>left：左边的就是主表，right：右边的就是主表</p></blockquote><ul><li>左外连接:left  + outer(可选)</li><li>右外连接:right + outer(可选)</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 查询列表<br><span class="hljs-keyword">from</span> table1 alias1 [连接类型:<span class="hljs-keyword">left</span><span class="hljs-operator">/</span><span class="hljs-keyword">right</span><span class="hljs-operator">/</span><span class="hljs-keyword">full</span> <span class="hljs-operator">+</span> <span class="hljs-keyword">outer</span>(可选)]<br><span class="hljs-keyword">join</span> table2 alias2<br><span class="hljs-keyword">on</span> 连接条件<br>&#123;<br><span class="hljs-keyword">where</span> 筛选条件<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> 分组<br><span class="hljs-keyword">having</span> 筛选后条件<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>特点：</p><p>1、外连接的查询结果为主表中的所有记录</p><p>如果从表中有和它匹配的，则显示器匹配的值</p><p>如果表中没有和他匹配的，则显示 null</p><p>外连接查询结果&#x3D;内连接结果+主表中有而从表没有的记录</p><p>2、左外连接：left 左边的是主表</p><p>右外连接：right join 的右边是主表</p><p>3、左外和右外交换表顺序，可以得到相同结果</p></blockquote><ul><li>全外连接(mysql 不支持): full + outer(可选)</li></ul><blockquote><p>特点：</p><p>1、全外连接&#x3D;内连接+表 1 有表 2 没有+表 2 有表 1 没有</p></blockquote><h4 id="3、交叉连接"><a href="#3、交叉连接" class="headerlink" title="3、交叉连接"></a>3、交叉连接</h4><ul><li>cross:笛卡尔乘积</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> b.<span class="hljs-operator">*</span>, bo.<span class="hljs-operator">*</span><br><span class="hljs-keyword">from</span> beauty b<br><span class="hljs-keyword">cross</span> <span class="hljs-keyword">join</span> boys bo<br></code></pre></td></tr></table></figure><h2 id="7、子查询"><a href="#7、子查询" class="headerlink" title="7、子查询"></a>7、子查询</h2><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs latex">定义：<br>一条查询语句中又嵌套了另一条完整的select语句，其中被嵌套的select语句，称为子查询或内查询<br>在外面的查询语句，称为主查询或外查询<br></code></pre></td></tr></table></figure><blockquote><p>分类：</p><p>按子查询出现的位置</p><p>select 后面：仅仅支持标量子查询</p><p>from 后面：支持表子查询</p><p>*where 或 having 后面：标量子查询   列子查询     行子查询</p><p>exists 后面</p><p>结果集的行列数不同：</p><p>标量子查询（结果只有一行一列）</p><p>列子查询（结果只有一列多行）</p><p>行子查询（结果集有多行多列）</p><p>表子查询（结果集）</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 行子查询<br># 查询员工编号最小并且工资最高的员工信息<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">from</span> employees<br><span class="hljs-keyword">where</span> (employee_id, salary) <span class="hljs-operator">=</span> (<br>    <span class="hljs-keyword">select</span> <span class="hljs-built_in">MIN</span>(employee_id), <span class="hljs-built_in">MAX</span>(salary)<br>    <span class="hljs-keyword">from</span> employees<br>);<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 查询每个部门的员工个数<br><span class="hljs-keyword">select</span> d.<span class="hljs-operator">*</span>,(<br>    <span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>)<br>    <span class="hljs-keyword">from</span> employees e<br>    <span class="hljs-keyword">where</span> e.department_id <span class="hljs-operator">=</span> d.department_id<br>) 个数<br><span class="hljs-keyword">from</span> departments d<br></code></pre></td></tr></table></figure><blockquote><p>where 或 having 后面的特点：</p><p>1、子查询都放在小括号内</p><p>2、子查询可以放在 from 后面、select 后面、where 后面、having 后面，但一般放在条件的右侧</p><p>3、子查询优先于主查询执行，主查询使用了子查询的执行结果</p><p>4、子查询根据查询结果的行数不同分为以下两类：</p><p>单行子查询</p><p>结果集只有一行</p><p>一般搭配单行操作符使用：&gt; &lt; &#x3D; &lt;&gt; &gt;&#x3D; &lt;&#x3D;</p><p>非法使用子查询的情况：</p><p>a、子查询的结果为一组值</p><p>b、子查询的结果为空<br>多行子查询</p><p>结果集有多行</p><p>一般搭配多行操作符使用：any、all、in、not in</p><p>in&#x2F;not in： 属于子查询结果中的任意一个就行</p><p>all：和子查询返回的所有值比较</p><p>any|some:和子查询返回的某一个值比较</p></blockquote><h2 id="8、分页查询"><a href="#8、分页查询" class="headerlink" title="8、分页查询"></a>8、分页查询</h2><ul><li>应用场景：- 实际的 web 项目中需要根据用户的需求提交对应的分页查询的 sql 语句</li></ul><h3 id="1、语法："><a href="#1、语法：" class="headerlink" title="1、语法："></a>1、语法：</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 字段<span class="hljs-operator">|</span>表达式,...<br><span class="hljs-keyword">from</span> 表<br>【<span class="hljs-keyword">where</span> 条件】<br>【<span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> 分组字段】<br>【<span class="hljs-keyword">having</span> 条件】<br>【<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> 排序的字段】<br>limit 【起始的条目索引，】条目数;<br></code></pre></td></tr></table></figure><blockquote><p>特点：</p><p>1.起始条目索引从 0 开始</p><p>2.limit 子句放在查询语句的最后</p><p>3.公式：select _ from   表 limit （page-1）_sizePerPage,sizePerPage<br>假如:<br>每页显示条目数 sizePerPage</p></blockquote><blockquote><p>要显示的页数 page</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 查询语句中所有的关键字顺序<br><span class="hljs-keyword">select</span> 查询列表<br><span class="hljs-keyword">from</span> table1<br>连接类型 <span class="hljs-keyword">join</span> table2<br><span class="hljs-keyword">on</span> 连接条件<br><span class="hljs-keyword">where</span>  筛选条件<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> 分组列表<br><span class="hljs-keyword">having</span> 分组后的筛选<br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span>排序列表<br>limit 偏移，条目数<br></code></pre></td></tr></table></figure><h2 id="9、联合查询"><a href="#9、联合查询" class="headerlink" title="9、联合查询"></a>9、联合查询</h2><blockquote><p>引入：union 联合、合并</p><p>作用：</p><p>1、将多条查询语句的结果合并成一个结果</p><p>2、避免手动创建临时表，将多条语句查询结果联合在一起</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">语法：<br><br>	<span class="hljs-keyword">select</span> 字段<span class="hljs-operator">|</span>常量<span class="hljs-operator">|</span>表达式<span class="hljs-operator">|</span>函数 【<span class="hljs-keyword">from</span> 表】 【<span class="hljs-keyword">where</span> 条件】 <span class="hljs-keyword">union</span> 【<span class="hljs-keyword">all</span>】<br>	<span class="hljs-keyword">select</span> 字段<span class="hljs-operator">|</span>常量<span class="hljs-operator">|</span>表达式<span class="hljs-operator">|</span>函数 【<span class="hljs-keyword">from</span> 表】 【<span class="hljs-keyword">where</span> 条件】 <span class="hljs-keyword">union</span> 【<span class="hljs-keyword">all</span>】<br>	<span class="hljs-keyword">select</span> 字段<span class="hljs-operator">|</span>常量<span class="hljs-operator">|</span>表达式<span class="hljs-operator">|</span>函数 【<span class="hljs-keyword">from</span> 表】 【<span class="hljs-keyword">where</span> 条件】 <span class="hljs-keyword">union</span>  【<span class="hljs-keyword">all</span>】<br>	.....<br>	<span class="hljs-keyword">select</span> 字段<span class="hljs-operator">|</span>常量<span class="hljs-operator">|</span>表达式<span class="hljs-operator">|</span>函数 【<span class="hljs-keyword">from</span> 表】 【<span class="hljs-keyword">where</span> 条件】<br></code></pre></td></tr></table></figure><blockquote></blockquote><blockquote><p>特点：</p><p>1、多条查询语句的查询的列数必须是一致的</p><p>2、多条查询语句的查询的列的类型几乎相同</p><p>3、union 代表去重，union all 代表不去重</p></blockquote><h1 id="六、DML-语言的学习"><a href="#六、DML-语言的学习" class="headerlink" title="六、DML 语言的学习"></a>六、DML 语言的学习</h1><h2 id="1、插入"><a href="#1、插入" class="headerlink" title="1、插入"></a>1、插入</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 语法：<br># 方法一<br># 可以插入多行<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> 表名(字段名，...)<br><span class="hljs-keyword">values</span>(值<span class="hljs-number">1</span>，...),(值<span class="hljs-number">2.</span>..),(值<span class="hljs-number">3.</span>..);<br># 支持子查询<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> beauty<br><span class="hljs-keyword">select</span> <span class="hljs-number">26</span>,<span class="hljs-string">&#x27;宋茜&#x27;</span>,<span class="hljs-string">&#x27;1196898339&#x27;</span>;<br># 方法二：只能插入一行，不支持子查询<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> 表名(字段名，...)<br><span class="hljs-keyword">set</span> 列名<span class="hljs-number">1</span><span class="hljs-operator">=</span>值<span class="hljs-number">1</span>，列名<span class="hljs-number">2</span><span class="hljs-operator">=</span>值<span class="hljs-number">2</span>，...<br></code></pre></td></tr></table></figure><p>特点：</p><ol><li>字段类型和值类型一致或兼容，而且一一对应</li><li>可以为空的字段，可以不用插入值，或用 null 填充</li><li>不可以为空的字段，必须插入值</li><li>字段个数和值的个数必须一致</li><li>字段可以省略，但默认所有字段，并且顺序和表中的存储顺序一致</li><li>字符型的用单引号引起来</li></ol><h2 id="2、修改"><a href="#2、修改" class="headerlink" title="2、修改"></a>2、修改</h2><h3 id="1、修改单表语法"><a href="#1、修改单表语法" class="headerlink" title="1、修改单表语法"></a>1、修改单表语法</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">update</span> 表名<br><span class="hljs-keyword">set</span> 字段<span class="hljs-operator">=</span>新值,字段<span class="hljs-operator">=</span>新值<br><span class="hljs-keyword">where</span> 条件<br></code></pre></td></tr></table></figure><h3 id="2、修改多表语法"><a href="#2、修改多表语法" class="headerlink" title="2、修改多表语法"></a>2、修改多表语法</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql"># sql92语法<br><span class="hljs-keyword">update</span> 表<span class="hljs-number">1</span> 别名<span class="hljs-number">1</span>,表<span class="hljs-number">2</span> 别名<span class="hljs-number">2</span><br><span class="hljs-keyword">set</span> 字段<span class="hljs-operator">=</span>新值，字段<span class="hljs-operator">=</span>新值<br><span class="hljs-keyword">where</span> 连接条件<br><span class="hljs-keyword">and</span> 筛选条件<br><br># sql99语法<br><span class="hljs-keyword">update</span> table1 alias1<br><span class="hljs-keyword">inner</span> <span class="hljs-operator">|</span><span class="hljs-keyword">left</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">right</span> <span class="hljs-keyword">join</span> table2 alias2<br><span class="hljs-keyword">on</span> 连接条件<br><span class="hljs-keyword">set</span> 列<span class="hljs-operator">=</span>值<br><span class="hljs-keyword">where</span> 筛选条件<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"># eg:修改张无忌的女朋友的手机号为<span class="hljs-number">114</span><br><span class="hljs-keyword">update</span> boys bo<br><span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> beauty b<br><span class="hljs-keyword">on</span> bo.id <span class="hljs-operator">=</span> b.boyfriend_id<br><span class="hljs-keyword">set</span> b.phone <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;114&#x27;</span><br><span class="hljs-keyword">where</span> bo.boyName <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;张无忌&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="3、删除"><a href="#3、删除" class="headerlink" title="3、删除"></a>3、删除</h2><h3 id="1、delete-语句"><a href="#1、delete-语句" class="headerlink" title="1、delete 语句"></a>1、delete 语句</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 单表的删除:<br><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> 表名<br><span class="hljs-keyword">where</span> 筛选条件<br><br># 多表的删除：<br># sql92语法<br><span class="hljs-keyword">delete</span> 别名<span class="hljs-number">1</span>，别名<span class="hljs-number">2</span><br><span class="hljs-keyword">from</span> 表<span class="hljs-number">1</span> 别名<span class="hljs-number">1</span>，表<span class="hljs-number">2</span> 别名<span class="hljs-number">2</span><br><span class="hljs-keyword">where</span> 连接条件<br><span class="hljs-keyword">and</span> 筛选条件;<br><br># sql99语法<br><span class="hljs-keyword">delete</span> table1_alias, table2_alias<br><span class="hljs-keyword">from</span> table1 alias1<br><span class="hljs-keyword">inner</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">left</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">right</span> table2 alias2<br><span class="hljs-keyword">on</span> 连接条件<br><span class="hljs-keyword">where</span> 筛选条件<br></code></pre></td></tr></table></figure><h3 id="2、truncate-语句"><a href="#2、truncate-语句" class="headerlink" title="2、truncate 语句"></a>2、truncate 语句</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 使用时间：清空表<br><span class="hljs-keyword">truncate</span> <span class="hljs-keyword">table</span> 表名<br></code></pre></td></tr></table></figure><p>delete 和 truncate 的区别【面试题】</p><ol><li>truncate 不能加 where 条件，而 delete 可以加 where 条件</li><li>truncate 的效率高一丢丢</li><li>truncate 删除带自增长的列的表后，如果再插入数据，数据从 1 开始<br>delete 删除带自增长列的表后，如果再插入数据，数据从上一次的断点处开始</li><li>truncate 删除不能回滚，delete 删除可以回滚</li><li>truncate 删除没有返回值，delete 删除有返回值</li></ol><h1 id="3、DDL-语句"><a href="#3、DDL-语句" class="headerlink" title="3、DDL 语句"></a>3、DDL 语句</h1><h2 id="1、库和表的管理"><a href="#1、库和表的管理" class="headerlink" title="1、库和表的管理"></a>1、库和表的管理</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 库的管理：<br># <span class="hljs-number">1</span>、创建库<br><span class="hljs-keyword">create</span> database 库名<br># <span class="hljs-number">2</span>、删除库<br><span class="hljs-keyword">drop</span> database 库名<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs sql">表的管理：<br># <span class="hljs-number">1</span>、创建表<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> stuinfo(<br>    stuId <span class="hljs-type">INT</span>,<br>    stuName <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>),<br>    gender <span class="hljs-type">CHAR</span>,<br>    bornDate DATETIME<br>);<br># 查看表结构<br><span class="hljs-keyword">DESC</span> studentinfo;<br><br><br># <span class="hljs-number">2</span>、修改表 <span class="hljs-keyword">alter</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> 表名 <span class="hljs-keyword">ADD</span><span class="hljs-operator">|</span>MODIFY<span class="hljs-operator">|</span><span class="hljs-keyword">DROP</span><span class="hljs-operator">|</span>CHANGE <span class="hljs-keyword">COLUMN</span> 字段名 【字段类型】;<br><br># 修改字段名<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> studentinfo CHANGE  <span class="hljs-keyword">COLUMN</span> sex gender <span class="hljs-type">CHAR</span>;<br><br># 修改表名<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> stuinfo RENAME [<span class="hljs-keyword">TO</span>]  studentinfo;<br><br># 修改字段类型和列级约束<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> studentinfo MODIFY <span class="hljs-keyword">COLUMN</span> borndate <span class="hljs-type">DATE</span> ;<br><br># 添加字段<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> studentinfo <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">first</span>;<br><br># 删除字段<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> studentinfo <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">COLUMN</span> email;<br><br><br><br># <span class="hljs-number">3</span>、删除表<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> [IF <span class="hljs-keyword">EXISTS</span>] studentinfo;<br><br><br># <span class="hljs-number">4</span>、表的复制<br># <span class="hljs-number">1</span>、仅复制表结构<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">copy</span> <span class="hljs-keyword">like</span> author<br><br># <span class="hljs-number">2</span>、复制表结构和数据<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> copy2<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> author;<br><br># <span class="hljs-number">3</span>、只复制部分数据<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span>  copy3<br><span class="hljs-keyword">select</span> id,au_name<br><span class="hljs-keyword">from</span> author<br><span class="hljs-keyword">where</span> nation <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;中国&#x27;</span>;<br><br># <span class="hljs-number">4</span>、只复制表字段<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span>  copy3<br><span class="hljs-keyword">select</span> id,au_name<br><span class="hljs-keyword">from</span> author<br><span class="hljs-keyword">where</span> <span class="hljs-number">1</span><span class="hljs-operator">=</span><span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure><h2 id="2、常见类型"><a href="#2、常见类型" class="headerlink" title="2、常见类型"></a>2、常见类型</h2><ul><li>数值型<ul><li>整型：</li><li>小数：<ul><li>定点数：最大取值范围与 double 相同，给的 decimal 的有效范围由 M 和 D 决定<ul><li>DEC(M,D): M+2 字节</li><li>DECIMAL(M,D):M+2 字节</li></ul></li><li>浮点数<ul><li>float: 4 字节</li><li>double:8 字节</li></ul></li></ul></li></ul></li><li>字符型(串数据)<ul><li>较短文本：<ul><li>char</li><li>varchar</li></ul></li><li>较长文本：<ul><li>text</li><li>blob(较长二进制数据)</li></ul></li></ul></li><li>Enum 型：枚举类型，插入值必须是列表中指定值之一<ul><li>列表成员为 1 ～ 255，需要 1 个字节存储</li><li>列表成员为 255 ～ 65535，需要 2 个字节存储</li></ul></li><li>Set 类型：可以保存 0 ～ 64 个成员<ul><li>与 set 区别：set 一次可选取多个成员，enum 一次只能选一个</li><li>(成员数，字节数)&#x3D;(18,1),(916,2),(1724,3),(2532,4),(3364,8),(18,1),</li></ul></li><li>日期型       字节数 最小值                 最大值<ul><li>date       4     1000-01-01           9999-12-31</li><li>datetime   8     1000-01-01 00:00:00  9999-12-31 23:59:59</li><li>timestamp  4     19700101080001       2038 年某时刻</li><li>time       3     -838:59:59           838:59:59</li><li>year       1     1901                 2155</li><li>timestamp 和实际时区有关，更能反映实际日期，datetime 反映插入式的当地时区</li><li>timestamp 的属性受 mysql 版本和 sqlmode 的影响很大</li></ul></li></ul><ol><li>M:整数位数 + 小数位数<br>N:小数位数<br>如果超过范围，插入临界值</li><li>M，D 可省略<br>默认值分别为 10，0<br>float 和 double 根据插入数值的精度来缺点精度</li><li>定点型精度更高，要求插入的数值的精度较高如货币使用定点型</li><li>原则：<br>所选精度越简单越好，能保存数值的类型越小越好</li><li>char 和 varchar 比较<br>写法        M 的意思             特点       空间消耗 效率</li></ol><p>char     cahr(M)     最大字符数，可省略   固定长度   较高     高</p><p>varchar  varchar(M) 最大字符数，不可省略 可变长度   较低     低</p><ul><li>binary 和 varbinary 类型相似</li></ul><h2 id="3、常见约束"><a href="#3、常见约束" class="headerlink" title="3、常见约束"></a>3、常见约束</h2><h3 id="1、基本约束"><a href="#1、基本约束" class="headerlink" title="1、基本约束"></a>1、基本约束</h3><ul><li>NOT NULL:非空</li><li>DEFAULT:默认值，比如性别</li><li>UNIQUE:唯一性，可以为空</li><li>CHECK:检查约束，mysql 不支持</li><li>PRIMARY KEY:主键，保证该字段唯一性</li><li>FOREIGN KEY:外键，限制两个表的关系，保证该字段的值必须来自于主表关联列的值,<br>在从表添加外键约束，用于引用主表中某列的值<br>eg:学生专业编号，员工表部门编号，员工表工种编号</li></ul><h3 id="2、约束详解"><a href="#2、约束详解" class="headerlink" title="2、约束详解"></a>2、约束详解</h3><ul><li>添加约束的时机<ul><li>创建表时</li><li>修改表时</li></ul></li><li>约束添加分类<ul><li>列级约束<ul><li>六大约束都支持，但外键没有效果,除了外键都支持，不可以起约束名。可以追加多个，中间逗号隔开，没有顺序要求</li></ul></li><li>表级约束<ul><li>除了 not null，default，其他的都支持，可以起约束名，对主键无效</li></ul></li></ul></li></ul><h3 id="3、约束添加例子"><a href="#3、约束添加例子" class="headerlink" title="3、约束添加例子"></a>3、约束添加例子</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 添加表级约束<br><span class="hljs-keyword">create</span> database if <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span> students;<br>use studemts;<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> stuinfo (<br>    id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> key,<br>    stuName <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>,<br>    gender <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">check</span> (gender <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;男&#x27;</span> <span class="hljs-keyword">or</span> gender <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;女&#x27;</span>)<br>    seat <span class="hljs-type">int</span> <span class="hljs-keyword">unique</span><br>    age <span class="hljs-type">int</span> <span class="hljs-keyword">default</span>  <span class="hljs-number">18</span><br>    majorId <span class="hljs-type">int</span> <span class="hljs-keyword">references</span> major(id)<br>);<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> major(<br>    id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> key,<br>    majorName <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>)<br>);<br><br># 添加表级约束<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> stuinfo(<br>    id <span class="hljs-type">int</span> ,<br>    stuName <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>),<br>    gender <span class="hljs-type">char</span>(<span class="hljs-number">1</span>),<br>    seat <span class="hljs-type">int</span>,<br>    age <span class="hljs-type">int</span> <span class="hljs-keyword">default</span>  <span class="hljs-number">18</span>,<br>    majorId <span class="hljs-type">int</span>,<br>    <span class="hljs-keyword">constraint</span> pk <span class="hljs-keyword">primary</span> key (id),<br>    <span class="hljs-keyword">constraint</span> uq <span class="hljs-keyword">unique</span>(seat),<br>    <span class="hljs-keyword">constraint</span> ck <span class="hljs-keyword">check</span> ( gender <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;男&#x27;</span> <span class="hljs-keyword">or</span> gender <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;女&#x27;</span> ),<br>    <span class="hljs-keyword">constraint</span> fk <span class="hljs-keyword">foreign</span> key (majorId) <span class="hljs-keyword">references</span> major(id)<br>)<br><br># 通用写法<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> if <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span> stuinfo(<br>    id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> key ,<br>    stuName <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> ,<br>    gender <span class="hljs-type">char</span>(<span class="hljs-number">1</span>),<br>    age <span class="hljs-type">int</span> <span class="hljs-keyword">default</span> <span class="hljs-number">18</span>,<br>    seat <span class="hljs-type">int</span> <span class="hljs-keyword">unique</span> ,<br>    majorId <span class="hljs-type">int</span>,<br>    <span class="hljs-keyword">constraint</span> fk_stuinfo_major <span class="hljs-keyword">foreign</span> key (majorId) <span class="hljs-keyword">references</span> major(id)<br></code></pre></td></tr></table></figure><ol><li>主键和唯一的区别：</li></ol><p>主键 唯一性 不允许为空 至多一个   可以组合（不推荐）</p><p>唯一 唯一性 允许为空   可以多个   可以组合（不推荐</p><ol start="2"><li>外键：</li></ol><p>要求在从表设置外键</p><p>从表的外键列的类型必须跟主表的类型一直或兼容，名称无要求</p><p>从表的关联列必须是一个 key,一般是主键或唯一</p><p>插入数据时，先主表再从表；删除数据时，先从表再主表</p><ol start="3"><li>添加列级约束</li></ol><p>alter table tableName modify column 字段名 字段类型 新约束</p><p>添加表级约束</p><p>alter table 表名 add constraint 约束名 约束类型(字段名) 外键的引用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">#  创建表时设置自增<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> table1(<br>  <span class="hljs-type">int</span> id auto_increment<br>)<br><br># 修改表时设置自增长列<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> table1 modify <span class="hljs-keyword">column</span> 字段名 字段类型 约束 auto_increment<br></code></pre></td></tr></table></figure><ol start="4"><li>自增长列</li></ol><p>不用手动插入值，可以自动提供序列值，默认从 1 开始，步长为 1</p><p>如果要更改起始值，手动插入值；要更改步长，修改系统设置</p><p>auto_increment_increment&#x3D;步长</p><p>一个表至多有一个自增长列，仅支持数值型</p><p>必须为一个 key（mysql 要求）</p><h1 id="七、数据库事务"><a href="#七、数据库事务" class="headerlink" title="七、数据库事务"></a>七、数据库事务</h1><ul><li>含义:通过一组逻辑操作单元（一组 DML——sql 语句），将数据从一种状态切换到另外一种状态</li></ul><p>特点:ACID）</p><p>原子性(Atomicity)：要么都执行，要么都回滚</p><p>一致性(Consistency)：保证数据的状态操作前和操作后保持一致</p><p>隔离性(Lsolation)：多个事务同时操作相同数据库的同一个数据时，一个事务的执行不受另外一个事务的干扰</p><p>持久性(Durability)：一个事务一旦提交，则数据将持久化到本地，除非其他事务对其进行修改</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs latex">相关步骤：<br>1. 开启事务<br>2. 编写事务的一组逻辑操作单元（多条sql语句）<br>3. 提交事务或回滚事务<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> engines # 查看存储引擎<br></code></pre></td></tr></table></figure><h2 id="1、事务的分类："><a href="#1、事务的分类：" class="headerlink" title="1、事务的分类："></a>1、事务的分类：</h2><h3 id="1、隐式事务：没有明显的开启和结束事务的标志"><a href="#1、隐式事务：没有明显的开启和结束事务的标志" class="headerlink" title="1、隐式事务：没有明显的开启和结束事务的标志"></a>1、隐式事务：没有明显的开启和结束事务的标志</h3><ul><li>insert、update、delete 语句本身就是一个事务</li></ul><h3 id="2、显式事务：具有明显的开启和结束事务的标志"><a href="#2、显式事务：具有明显的开启和结束事务的标志" class="headerlink" title="2、显式事务：具有明显的开启和结束事务的标志"></a>2、显式事务：具有明显的开启和结束事务的标志</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql"># <span class="hljs-number">1</span>、开启事务<br><span class="hljs-keyword">set</span> autocommit <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;# 取消自动提交事务的功能<br><span class="hljs-keyword">start</span> transaction;# 可选的<br># <span class="hljs-number">2</span>、编写事务的一组逻辑操作单元（多条<span class="hljs-keyword">sql</span>语句）<br># 仅增删改查<br><span class="hljs-keyword">insert</span><br><span class="hljs-keyword">update</span><br><span class="hljs-keyword">delete</span><br><span class="hljs-keyword">truncate</span>不支持<span class="hljs-keyword">rollback</span><br><span class="hljs-number">3.</span> 提交事务或回滚事务,两者选一<br><span class="hljs-keyword">commit</span>;    # 提交<br><span class="hljs-keyword">rollback</span>; # 回滚<br></code></pre></td></tr></table></figure><p>###使用到的关键字</p><p>set autocommit&#x3D;0;<br>start transaction;<br>commit;<br>rollback;</p><p>savepoint   断点<br>commit to 断点<br>rollback to 断点</p><h2 id="3、事务的隔离级别"><a href="#3、事务的隔离级别" class="headerlink" title="3、事务的隔离级别:"></a>3、事务的隔离级别:</h2><p>事务并发问题如何发生？</p><p>当多个事务同时操作同一个数据库的相同数据时</p><p>事务的并发问题有哪些？</p><p>脏读：一个事务读取到     了另外一个事务未提交的数据</p><p>不可重复读：同一个事务中，多次读取到的数据不一致</p><p>幻读：一个事务读取数据时，另外一个事务进行更新，导致第一个事务读取到了没有更新的数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 如何避免事务的并发问题？<br># 设置隔离级别：<br><span class="hljs-keyword">set</span> session<span class="hljs-operator">|</span><span class="hljs-keyword">global</span> transaction isolation level 隔离级别名;<br># 查看隔离级别：<br><span class="hljs-keyword">select</span> @<span class="hljs-variable">@transaction</span>_isolation;<br></code></pre></td></tr></table></figure><table><thead><tr><th></th><th>脏读</th><th>不可重复读</th><th>幻读</th><th>ORACLE 支持</th><th>MYSQL 支持</th></tr></thead><tbody><tr><td>READ_UNCOMMITTED</td><td>Y</td><td>Y</td><td>Y</td><td>Y</td><td>Y</td></tr><tr><td>READ_COMMITTED</td><td>N</td><td>Y</td><td>Y</td><td>N</td><td>Y</td></tr><tr><td>REPEATABLE_READ：一把行锁</td><td>N</td><td>N</td><td>Y</td><td>N</td><td>Y</td></tr><tr><td>SERIALIZABLE：表锁</td><td>N</td><td>N</td><td>N</td><td>Y</td><td>Y</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"># <span class="hljs-keyword">savepoint</span>的使用<br><span class="hljs-keyword">set</span> autocommit  <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><span class="hljs-keyword">start</span> transaction ;<br><span class="hljs-keyword">delete</span>  <span class="hljs-keyword">from</span> account <span class="hljs-keyword">where</span> id <span class="hljs-operator">=</span> <span class="hljs-number">25</span>;<br># 设置保存点<br><span class="hljs-keyword">savepoint</span> a;<br><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> account <span class="hljs-keyword">where</span>  id <span class="hljs-operator">=</span> <span class="hljs-number">20</span>;<br># 回滚到保存点<br><span class="hljs-keyword">rollback</span> <span class="hljs-keyword">to</span> a;<br></code></pre></td></tr></table></figure><h1 id="八、视图"><a href="#八、视图" class="headerlink" title="八、视图"></a>八、视图</h1><p>理解成一张虚拟的表,mysql-5.0.1 新特性</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs latex">视图和表的区别：<br>            关键字      使用方式	    占用物理空间                使用<br>	视图	view       完全相同	    不占用，仅仅保存的是sql逻辑  一般用于查询<br>	表	    table      完全相同	    占用,保存实际数据           增删改查<br></code></pre></td></tr></table></figure><p>视图的好处：</p><ol><li>sql 语句实现了封装性，提高重用性，效率高</li><li>和表实现了分离，提高了安全性</li><li>保护数据，提高安全性</li><li>简化复杂 sql，不必知道其查询细节</li></ol><h2 id="1、视图的创建"><a href="#1、视图的创建" class="headerlink" title="1、视图的创建"></a>1、视图的创建</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span>  视图名<br><span class="hljs-keyword">AS</span><br><span class="hljs-keyword">select</span> stuName,majorId;<br><span class="hljs-keyword">from</span> stuinfo s<br><span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> major m <span class="hljs-keyword">on</span> s.majorId <span class="hljs-operator">=</span> m.id<br></code></pre></td></tr></table></figure><h2 id="2、视图的增删改查"><a href="#2、视图的增删改查" class="headerlink" title="2、视图的增删改查"></a>2、视图的增删改查</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql"># <span class="hljs-number">1</span>、查看视图的数据 ★<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> my_v4;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> my_v1 <span class="hljs-keyword">WHERE</span> last_name<span class="hljs-operator">=</span><span class="hljs-string">&#x27;Partners&#x27;</span>;<br><br># <span class="hljs-number">2</span>、插入视图的数据<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> my_v4(last_name,department_id) <span class="hljs-keyword">VALUES</span>(<span class="hljs-string">&#x27;虚竹&#x27;</span>,<span class="hljs-number">90</span>);<br><br># <span class="hljs-number">3</span>、修改视图的数据<br><span class="hljs-keyword">UPDATE</span> my_v4 <span class="hljs-keyword">SET</span> last_name <span class="hljs-operator">=</span><span class="hljs-string">&#x27;梦姑&#x27;</span> <span class="hljs-keyword">WHERE</span> last_name<span class="hljs-operator">=</span><span class="hljs-string">&#x27;虚竹&#x27;</span>;<br><br># <span class="hljs-number">4</span>、删除视图的数据<br><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> my_v4;<br><br># <span class="hljs-number">5</span>、视图结构的查看<br><span class="hljs-keyword">DESC</span> test_v7;<br><span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> test_v7;<br></code></pre></td></tr></table></figure><h2 id="3、某些视图不能更新"><a href="#3、某些视图不能更新" class="headerlink" title="3、某些视图不能更新"></a>3、某些视图不能更新</h2><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs latex">包含以下关键字的sql语句：分组函数、distinct、group  by、having、union或者union all<br>	常量视图<br>	Select中包含子查询<br>	join<br>	from一个不能更新的视图<br>	where子句的子查询引用了from子句中的表<br>    用到了不可更新的视图<br></code></pre></td></tr></table></figure><h2 id="4、视图逻辑的更新"><a href="#4、视图逻辑的更新" class="headerlink" title="4、视图逻辑的更新"></a>4、视图逻辑的更新</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql">#方式一：<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">VIEW</span> test_v7<br><span class="hljs-keyword">AS</span><br><span class="hljs-keyword">SELECT</span> last_name <span class="hljs-keyword">FROM</span> employees<br><span class="hljs-keyword">WHERE</span> employee_id100;<br><br>#方式二:<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">VIEW</span> test_v7<br><span class="hljs-keyword">AS</span><br><span class="hljs-keyword">SELECT</span> employee_id <span class="hljs-keyword">FROM</span> employees;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> test_v7;<br></code></pre></td></tr></table></figure><h1 id="九、变量"><a href="#九、变量" class="headerlink" title="九、变量"></a>九、变量</h1><h2 id="1、变量分类"><a href="#1、变量分类" class="headerlink" title="1、变量分类"></a>1、变量分类</h2><ul><li>系统变量<ul><li>全局变量:针对于所有会话（连接）有效，但不能跨重启</li><li>会话变量:针对于当前会话（连接）有效</li></ul></li><li>自定义变量<ul><li>用户变量</li><li>局部变量</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 系统变量<br># <span class="hljs-number">1</span>、查看所有系统变量<br><span class="hljs-keyword">show</span> <span class="hljs-keyword">global</span> <span class="hljs-operator">|</span> session(<span class="hljs-keyword">default</span>) variables;<br># <span class="hljs-number">2</span>、查看满足条件的变量<br><span class="hljs-keyword">show</span> <span class="hljs-keyword">global</span> <span class="hljs-operator">|</span> session variables <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;char&#x27;</span>;<br># <span class="hljs-number">3</span>、查看某个具体的变量<br><span class="hljs-keyword">select</span> @@系统变量名<br># <span class="hljs-number">4</span>、为某个系统变量赋值<br><span class="hljs-keyword">set</span> <span class="hljs-keyword">global</span> <span class="hljs-operator">|</span>session 系统变量名 <span class="hljs-operator">=</span> 值<br><span class="hljs-keyword">set</span> @<span class="hljs-variable">@global</span> <span class="hljs-operator">|</span>session.系统变量名 <span class="hljs-operator">=</span> 值<br><br><br># 自定义变量<br># 用户变量<br># 声明并初始化：<br><span class="hljs-keyword">SET</span> @变量名<span class="hljs-operator">=</span>值;<br><span class="hljs-keyword">SET</span> @变量名:<span class="hljs-operator">=</span>值;<br><span class="hljs-keyword">SELECT</span> @变量名:<span class="hljs-operator">=</span>值;<br># 赋值<br># 方式一：一般用于赋简单的值<br><span class="hljs-keyword">SET</span> 变量名<span class="hljs-operator">=</span>值;<br><span class="hljs-keyword">SET</span> 变量名:<span class="hljs-operator">=</span>值;<br><span class="hljs-keyword">SELECT</span> 变量名:<span class="hljs-operator">=</span>值;<br># 方式二：一般用于赋表 中的字段值<br><span class="hljs-keyword">SELECT</span> 字段名或表达式 <span class="hljs-keyword">INTO</span> 变量<br><span class="hljs-keyword">FROM</span> 表;<br># 使用：<br><span class="hljs-keyword">select</span> @变量名;<br><br># 局部变量<br># 声明：<br><span class="hljs-keyword">declare</span> 变量名 类型 【<span class="hljs-keyword">default</span> 值】;<br># 赋值：<br># 方式一：一般用于赋简单的值<br><span class="hljs-keyword">SET</span> 变量名<span class="hljs-operator">=</span>值;<br><span class="hljs-keyword">SET</span> 变量名:<span class="hljs-operator">=</span>值;<br><span class="hljs-keyword">SELECT</span> 变量名:<span class="hljs-operator">=</span>值;<br># 方式二：一般用于赋表 中的字段值<br><span class="hljs-keyword">SELECT</span> 字段名或表达式 <span class="hljs-keyword">INTO</span> 变量<br><span class="hljs-keyword">FROM</span> 表;<br># 使用：<br>	<span class="hljs-keyword">select</span> 变量名<br><br> 			作用域			定义位置		语法<br>用户变量	当前会话		会话的任何地方		加@符号，不用指定类型<br>局部变量	定义它的<span class="hljs-keyword">BEGIN</span> <span class="hljs-keyword">END</span>中 	<span class="hljs-keyword">BEGIN</span> <span class="hljs-keyword">END</span>的第一句话	一般不用加@,需要指定类型<br></code></pre></td></tr></table></figure><h1 id="十、存储过程和函数"><a href="#十、存储过程和函数" class="headerlink" title="十、存储过程和函数"></a>十、存储过程和函数</h1><h2 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h2><p>含义：一组经过预先编译的 sql 语句的集合,类似于 java 的方法</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs latex">好处：<br><br>	1、提高了sql语句的重用性，减少了开发程序员的压力<br>	2、提高了效率<br>	3、减少了传输次数<br></code></pre></td></tr></table></figure><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><ul><li>1、无返回无参</li><li>2、仅仅带 in 类型，无返回有参</li><li>3、仅仅带 out 类型，有返回无参</li><li>4、既带 in 又带 out，有返回有参</li><li>5、带 inout，有返回有参</li><li>注意：in、out、inout 都可以在一个存储过程中带多个</li></ul><h3 id="创建存储过程"><a href="#创建存储过程" class="headerlink" title="创建存储过程"></a>创建存储过程</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> 存储过程名(<span class="hljs-keyword">in</span><span class="hljs-operator">|</span><span class="hljs-keyword">out</span><span class="hljs-operator">|</span><span class="hljs-keyword">inout</span> 参数名  参数类型,...)<br><span class="hljs-keyword">begin</span><br>    存储过程体<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs latex">类似于方法：<br>	修饰符 返回类型 方法名(参数类型 参数名,...)&#123;<br>    	方法体;<br>	&#125;<br>注意<br>	1、需要设置新的结束标记<br>	delimiter 新的结束标记<br>	示例：<br>	delimiter <span class="hljs-built_in">$</span><br>	CREATE PROCEDURE 存储过程名(IN|OUT|INOUT 参数名  参数类型,...)<br>	BEGIN<br>		sql语句1;<br>		sql语句2;<br>	END <span class="hljs-built_in">$</span><br>	2、存储过程体中可以有多条sql语句，每条末尾必须加;如果仅仅一条sql语句，则可以省略begin end<br>	3、参数前面的符号的意思<br>	in:该参数只能作为输入 （该参数不能做返回值）<br>	out：该参数只能作为输出（该参数只能做返回值）<br>	inout：既能做输入又能做输出<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 创建存储过程<br>delimiter $<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> mypl()<br><span class="hljs-keyword">begin</span><br>    <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> admin(username, password)<br>    <span class="hljs-keyword">values</span> (<span class="hljs-string">&#x27;john1&#x27;</span>,<span class="hljs-string">&#x27;lqs&#x27;</span>),(<span class="hljs-string">&#x27;john1&#x27;</span>,<span class="hljs-string">&#x27;lqs&#x27;</span>),(<span class="hljs-string">&#x27;john1&#x27;</span>,<span class="hljs-string">&#x27;lqs&#x27;</span>),(<span class="hljs-string">&#x27;john1&#x27;</span>,<span class="hljs-string">&#x27;lqs&#x27;</span>);<br><span class="hljs-keyword">end</span> $<br><span class="hljs-keyword">call</span> mypl()$<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> admin$<br><br># 创建带<span class="hljs-keyword">in</span>模式参数带存储过程<br>delimiter $<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> myp2(<span class="hljs-keyword">in</span> beauty <span class="hljs-type">varchar</span> (<span class="hljs-number">20</span>))<br><span class="hljs-keyword">begin</span><br>    <span class="hljs-keyword">select</span> bo.<span class="hljs-operator">*</span><br>    <span class="hljs-keyword">from</span> boys bo<br>    <span class="hljs-keyword">right</span> <span class="hljs-keyword">join</span> beauty b <span class="hljs-keyword">on</span> bo.id <span class="hljs-operator">=</span> b.boyfriend_id<br>    <span class="hljs-keyword">where</span> b.name <span class="hljs-operator">=</span> beautyName;<br><span class="hljs-keyword">end</span> $<br><span class="hljs-keyword">call</span> myp2(<span class="hljs-string">&#x27;小昭&#x27;</span>)<br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> myp3(<span class="hljs-keyword">in</span> username <span class="hljs-type">varchar</span> (<span class="hljs-number">20</span>), <span class="hljs-keyword">in</span> password <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>))<br><span class="hljs-keyword">begin</span><br>    <span class="hljs-keyword">declare</span> <span class="hljs-keyword">result</span> <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">default</span> <span class="hljs-string">&#x27;&#x27;</span>; # 声明并初始化<br>    <span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">into</span> <span class="hljs-keyword">result</span><br>    <span class="hljs-keyword">from</span> admin<br>    <span class="hljs-keyword">where</span> admin.username <span class="hljs-operator">=</span> username<br>    <span class="hljs-keyword">and</span> admin.password <span class="hljs-operator">=</span> password<br>    <span class="hljs-keyword">select</span> <span class="hljs-keyword">result</span>;<br><span class="hljs-keyword">end</span> $<br></code></pre></td></tr></table></figure><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3><a href="#" class="headerlink"></a></h3><p>学过的函数：LENGTH、SUBSTR、CONCAT 等</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 创建函数<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">FUNCTION</span> 函数名(参数名 参数类型,...) <span class="hljs-keyword">RETURNS</span> 返回类型<br><span class="hljs-keyword">BEGIN</span><br>    函数体<br><span class="hljs-keyword">END</span><br>###调用函数<br><span class="hljs-keyword">SELECT</span> 函数名（实参列表）<br></code></pre></td></tr></table></figure><h3 id="函数和存储过程的区别"><a href="#函数和存储过程的区别" class="headerlink" title="函数和存储过程的区别"></a>函数和存储过程的区别</h3><p>关键字 调用语法 返回值 应用场景<br>函数  FUNCTION SELECT 函数() 只能是一个 一般用于查询结果为一个值并返回时，当有返回值而且仅仅一个<br>存储过程 PROCEDURE CALL 存储过程() 可以有 0 个或多个 一般用于更新</p><h3 id="流程控制结构"><a href="#流程控制结构" class="headerlink" title="流程控制结构"></a>流程控制结构</h3><p>###分支<br>一、if 函数<br>语法：if(条件，值 1，值 2)<br>特点：可以用在任何位置</p><p>二、case 语句</p><p>语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sql">情况一：类似于switch<br><span class="hljs-keyword">case</span> 表达式<br><span class="hljs-keyword">when</span> 值<span class="hljs-number">1</span> <span class="hljs-keyword">then</span> 结果<span class="hljs-number">1</span>或语句<span class="hljs-number">1</span>(如果是语句，需要加分号)<br><span class="hljs-keyword">when</span> 值<span class="hljs-number">2</span> <span class="hljs-keyword">then</span> 结果<span class="hljs-number">2</span>或语句<span class="hljs-number">2</span>(如果是语句，需要加分号)<br>...<br><span class="hljs-keyword">else</span> 结果n或语句n(如果是语句，需要加分号)<br><span class="hljs-keyword">end</span> 【<span class="hljs-keyword">case</span>】（如果是放在<span class="hljs-keyword">begin</span> <span class="hljs-keyword">end</span>中需要加上<span class="hljs-keyword">case</span>，如果放在<span class="hljs-keyword">select</span>后面不需要）<br><br>情况二：类似于多重if<br><span class="hljs-keyword">case</span><br><span class="hljs-keyword">when</span> 条件<span class="hljs-number">1</span> <span class="hljs-keyword">then</span> 结果<span class="hljs-number">1</span>或语句<span class="hljs-number">1</span>(如果是语句，需要加分号)<br><span class="hljs-keyword">when</span> 条件<span class="hljs-number">2</span> <span class="hljs-keyword">then</span> 结果<span class="hljs-number">2</span>或语句<span class="hljs-number">2</span>(如果是语句，需要加分号)<br>...<br><span class="hljs-keyword">else</span> 结果n或语句n(如果是语句，需要加分号)<br><span class="hljs-keyword">end</span> 【<span class="hljs-keyword">case</span>】（如果是放在<span class="hljs-keyword">begin</span> <span class="hljs-keyword">end</span>中需要加上<span class="hljs-keyword">case</span>，如果放在<span class="hljs-keyword">select</span>后面不需要）<br></code></pre></td></tr></table></figure><p>特点：<br>可以用在任何位置</p><p>三、if elseif 语句</p><p>语法：</p><p>if 情况 1 then 语句 1;<br>elseif 情况 2 then 语句 2;<br>…<br>else 语句 n;<br>end if;<br>特点：<br>只能用在 begin end 中！！！！！！！！！！！！！！！<br>三者比较：<br>应用场合<br>if 函数 简单双分支<br>case 结构 等值判断 的多分支<br>if 结构 区间判断 的多分支 ###循环</p><p>语法：<br>【标签：】WHILE 循环条件  DO<br>循环体<br>END WHILE 【标签】;</p><p>特点：<br>只能放在 BEGIN END 里面<br>如果要搭配 leave 跳转语句，需要使用标签，否则可以不用标签<br>leave 类似于 java 中的 break 语句，跳出所在循环！！！</p><ul><li>已看完 p-166</li></ul></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/MySQL/" class="category-chain-item">MySQL</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/MySQL/">#MySQL</a></div></div><div class="license-box my-3"><div class="license-title"><div>MySQL初级</div><div>https://polarisink.github.io/2022/08/13/yuque/MySQL初级/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Areis</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2022年8月13日</div></div><div class="license-meta-item"><div>许可协议</div><div><a target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2022/08/13/yuque/RabbitMQ%E6%95%99%E7%A8%8B/" title="RabbitMQ教程"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">RabbitMQ教程</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2022/08/13/yuque/MyBatisPlus%E4%BD%93%E9%AA%8C%E5%8F%8A%E4%BD%BF%E7%94%A8/" title="MyBatisPlus体验及使用"><span class="hidden-mobile">MyBatisPlus体验及使用</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t){var e=Fluid.plugins.typing,i=t.getElementById("subtitle");i&&e&&e(i.getAttribute("data-typed-text"))}((window,document))</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",function(){var t,o=jQuery("#toc");0!==o.length&&window.tocbot&&(t=jQuery("#board-ctn").offset().top,window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-t},CONFIG.toc)),0<o.find(".toc-list-item").length&&o.css("visibility","visible"),Fluid.events.registerRefreshCallback(function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;0<t.find(".toc-list-item").length&&t.css("visibility","visible")}}))})</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",function(){Fluid.plugins.fancyBox()})</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>